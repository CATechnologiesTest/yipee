# Generated by Yipee.io
# Application: yah-for-k8s

apiVersion: v1
kind: Service
metadata:
  name: composecvt
spec:
  selector:
    name: yah-for-k8s
    component: composecvt
  ports:
  - name: composecvt-9090
    targetPort: 9090
    port: 9090
    protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: auth
spec:
  selector:
    name: yah-for-k8s
    component: auth
  ports:
  - name: auth-8128
    targetPort: 8128
    port: 8128
    protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: yipee-validator
spec:
  selector:
    name: yah-for-k8s
    component: yipee-validator
  ports:
  - name: yipee-validator-9099
    targetPort: 9099
    port: 9099
    protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: kubecvt
spec:
  selector:
    name: yah-for-k8s
    component: kubecvt
  ports:
  - name: kubecvt-9090
    targetPort: 9090
    port: 9090
    protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: ui
spec:
  selector:
    name: yah-for-k8s
    component: ui
  ports:
  - name: ui-80
    targetPort: 80
    port: 80
    protocol: TCP

---
apiVersion: v1
kind: Service
metadata:
  name: backend
spec:
  selector:
    name: yah-for-k8s
    component: backend
  ports:
  - name: backend-3000
    targetPort: 3000
    port: 3000
    protocol: TCP

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: secret-scanner
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: secret-scanner
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: secret_scanner
        image: yipee-tools-spoke-cos.ca.com:5000/yipee-secret-scanner
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: secret-scanner
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: db
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: db
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: db
        image: /postgres:9.5.5-alpine
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: db
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: composecvt
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: composecvt
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: composecvt
        image: yipee-tools-spoke-cos.ca.com:5000/yipee-cvt-compose-svc
        ports:
        - containerPort: 9090
          protocol: TCP
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: composecvt
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: oscvt
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: oscvt
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: oscvt
        image: yipee-tools-spoke-cos.ca.com:5000/yipee-cvt-openshift-svc
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: oscvt
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: auth
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: auth
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: auth
        image: yipee-tools-spoke-cos.ca.com:5000/yipee-auth
        ports:
        - containerPort: 8128
          protocol: TCP
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
        env:
        - name: POSTGRES_DB
          value: postgres
        - name: POSTGRES_HOST
          value: db
        - name: POSTGRES_SSL
          value: disable
        - name: POSTGRES_USER
          value: postgres
        - name: YIPEE_TEAM_OWNER
          value: ${YIPEE_TEAM_OWNER}
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: auth
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: yipee-validator
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: yipee-validator
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: yipee_validator
        image: yipee-tools-spoke-cos.ca.com:5000/yipee-validation-svc
        ports:
        - containerPort: 9099
          protocol: TCP
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: yipee-validator
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: kubecvt
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: kubecvt
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: kubecvt
        image: yipee-tools-spoke-cos.ca.com:5000/yipee-cvt-kubernetes-svc
        ports:
        - containerPort: 9090
          protocol: TCP
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: kubecvt
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: ui
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: ui
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: ui
        image: yipee-tools-spoke-cos.ca.com:5000/zebra
        ports:
        - containerPort: 80
          protocol: TCP
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
        env:
        - name: API_HOST
          value: backend:3000
        - name: CORS_POLICY
          value: cos.yipee.io|github-isl-01.ca.com
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: ui
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: backend
spec:
  selector:
    matchLabels:
      name: yah-for-k8s
      component: backend
  rollbackTo:
    revision: 0
  template:
    spec:
      containers:
      - name: backend
        image: yipee-tools-spoke-cos.ca.com:5000/dokken
        ports:
        - containerPort: 3000
          protocol: TCP
        livenessProbe:
          exec:
            command: []
          failureThreshold: 0
          periodSeconds: 0
          timeoutSeconds: 0
        readinessProbe:
          failureThreshold: 0
          exec:
            command: []
          periodSeconds: 0
          timeoutSeconds: 0
        env:
        - name: CALLBACK_HOST
          value: ${CALLBACK_HOST}
        - name: CLIENT_ID
          value: ${CLIENT_ID}
        - name: CLIENT_SECRET
          value: ${CLIENT_SECRET}
        - name: CONTAINER_URL
          value: http://composecvt:9090
        - name: DOKKEN_URL
          value: http://backend:3000
        - name: GITHUB_HOST
          value: github-isl-01.ca.com
        - name: KUBERNETES_URL
          value: http://kubecvt:9090
        - name: LOG_LEVEL
          value: info
        - name: OPENSHIFT_URL
          value: http://oscvt:9090
        - name: PG_HOST
          value: db
        - name: PG_PORT
          value: '5432'
        - name: YIPEE_TEAM_OWNER
          value: ${YIPEE_TEAM_OWNER}
        - name: YIPEE_VALIDATOR_URL
          value: http://yipee_validator:9099
      restartPolicy: Always
    metadata:
      labels:
        name: yah-for-k8s
        component: backend
  strategy:
    type: RollingUpdate
    rollingUpdate:
      maxSurge: 1
      maxUnavailable: 1
  replicas: 1
  revisionHistoryLimit: 2

